  <script>
      accept_tos = function(e){
          $.ajax({
            type: 'post',
            url: '{{ url_for('auth.tos') }}',
            data: e,
            success: function (data) {
                var licence_button = document.getElementById("licence_span");
                if (data.tos == true){
                    licence_button.hidden = true;
                }
      }})};
  </script>

<button type="button" class="btn btn-info btn-lg" data-toggle="modal" id='licence_button' data-target="#licence">{{ _('Accept licence') }}</button>

  <!-- Modal -->
  <div class="modal fade" id="licence" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Licence and terms</h4>
        </div>
        <div class="modal-body">
          <p>{{ __('Licence text') }}</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" onclick="accept_tos('accept')">Accept</button>
            <button type="button" class="btn btn-default" data-dismiss="modal" onclick="accept_tos('decline')">Decline</button>
        </div>
      </div>

    </div>
  </div>
